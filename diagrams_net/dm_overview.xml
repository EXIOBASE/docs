<mxfile host="app.diagrams.net" modified="2024-06-19T00:26:11.536Z" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36" etag="B6aYnMCREMX_LYrx52cd" version="24.5.5" type="device" pages="4">
  <diagram name="Interface and dispatch." id="edf60f1a-56cd-e834-aa8a-f176f3a09ee4">
    <mxGraphModel dx="1430" dy="781" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" background="none" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="120" y="160" as="sourcePoint" />
            <mxPoint x="180" y="160" as="targetPoint" />
            <Array as="points">
              <mxPoint x="182" y="160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-33" target="XBCE_SCQUN8-LyyIOr6G-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="120" y="160" />
              <mxPoint x="120" y="83" />
            </Array>
            <mxPoint x="130" y="160.0000000000001" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-33" value="snakemake" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="40" y="140" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="XBCE_SCQUN8-LyyIOr6G-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="130" y="240.0000000000001" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.01;entryY=0.448;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-34" target="XBCE_SCQUN8-LyyIOr6G-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="130" y="240" />
              <mxPoint x="130" y="92" />
            </Array>
            <mxPoint x="130" y="240.0000000000001" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-34" value="cli" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="40" y="220" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=-0.006;entryY=0.612;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-35" target="XBCE_SCQUN8-LyyIOr6G-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="140" y="360" />
              <mxPoint x="140" y="101" />
            </Array>
            <mxPoint x="130" y="320" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-35" target="XBCE_SCQUN8-LyyIOr6G-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-35" value="wrapper fns" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="40" y="340" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.004;entryY=0.812;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-36" target="XBCE_SCQUN8-LyyIOr6G-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="150" y="460" />
              <mxPoint x="150" y="111" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=-0.02;entryY=0.151;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;dashPattern=1 2;endArrow=oval;endFill=1;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-36" target="XBCE_SCQUN8-LyyIOr6G-74" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="150" y="460" />
              <mxPoint x="150" y="545" />
              <mxPoint x="316" y="545" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-91" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-36" target="XBCE_SCQUN8-LyyIOr6G-81" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="650" y="130" as="targetPoint" />
            <Array as="points">
              <mxPoint x="600" y="460" />
              <mxPoint x="600" y="140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-36" value="direct" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="40" y="440" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-39" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;__main__.py&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;startSize=23;" parent="1" vertex="1">
          <mxGeometry x="170" y="40" width="130" height="240" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-37" value="Python does imports and runs &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;__init__.py&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontSize=9;" parent="XBCE_SCQUN8-LyyIOr6G-39" vertex="1">
          <mxGeometry x="10" y="30" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-40" value="Get snakemake &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;ExtArgs&lt;/font&gt; and pass to &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;entry_point()&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontSize=9;" parent="XBCE_SCQUN8-LyyIOr6G-39" vertex="1">
          <mxGeometry x="10" y="95" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="omsBiiyZAU-YAmJS0vMi-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;endArrow=none;endFill=0;startArrow=classic;startFill=1;" edge="1" parent="XBCE_SCQUN8-LyyIOr6G-39" source="XBCE_SCQUN8-LyyIOr6G-47">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="60" y="160.0000000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-47" value="Get CLI &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;ExtArgs&lt;/font&gt; and pass to &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;entry_point()&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontSize=9;" parent="XBCE_SCQUN8-LyyIOr6G-39" vertex="1">
          <mxGeometry x="10" y="175" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-41" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;exec_control/external.py&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="110" width="180" height="170" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-43" value="Call &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;get_snakemake_args()&lt;/font&gt;. Instantiate &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;ExtArgs&lt;/font&gt; from snakemake info." style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontSize=9;" parent="XBCE_SCQUN8-LyyIOr6G-41" vertex="1">
          <mxGeometry x="10" y="30" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="bdgGGyO7C9tceOIkd3II-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;endArrow=none;endFill=0;startArrow=classic;startFill=1;" edge="1" parent="XBCE_SCQUN8-LyyIOr6G-41" source="XBCE_SCQUN8-LyyIOr6G-48">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="90" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-48" value="Call &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;get_commandline_args()&lt;/font&gt;. Instantiate &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;ExtArgs&lt;/font&gt; from CLI info." style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontSize=9;" parent="XBCE_SCQUN8-LyyIOr6G-41" vertex="1">
          <mxGeometry x="10" y="120" width="160" height="35" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-77" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;dashed=1;dashPattern=1 2;endArrow=oval;endFill=1;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-57" target="XBCE_SCQUN8-LyyIOr6G-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-56" value="&lt;p style=&quot;line-height: 60%;&quot;&gt;&lt;font style=&quot;font-size: 8px;&quot;&gt;exec_control/quick_fns_query.py exec_control/quick_fns_simple_commands.py&lt;/font&gt;&lt;/p&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="290" width="180" height="140" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-57" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;One of many fns that set up &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;ExtArgs&lt;/font&gt; and calls &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;entry_point()&lt;/font&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fontSize=9;" parent="XBCE_SCQUN8-LyyIOr6G-56" vertex="1">
          <mxGeometry x="10" y="50" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-59" value="" style="endArrow=none;dashed=1;html=1;rounded=0;dashPattern=1 1;strokeWidth=2;" parent="XBCE_SCQUN8-LyyIOr6G-56" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="110" y="130" as="sourcePoint" />
            <mxPoint x="110" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-58" value="" style="endArrow=none;dashed=1;html=1;rounded=0;dashPattern=1 1;strokeWidth=2;" parent="XBCE_SCQUN8-LyyIOr6G-56" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="110" y="40" as="sourcePoint" />
            <mxPoint x="110" y="30" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-72" value="&lt;b&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;local/ext_args.py&lt;/font&gt;&lt;/b&gt;" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="480" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-73" value="ExtArgsCommandStr" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=9;fontFamily=Courier New;" parent="XBCE_SCQUN8-LyyIOr6G-72" vertex="1">
          <mxGeometry y="30" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-74" value="ExtArgsQueryStr" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=9;fontFamily=Courier New;" parent="XBCE_SCQUN8-LyyIOr6G-72" vertex="1">
          <mxGeometry y="60" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-75" value="ExtArgs" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=9;fontFamily=Courier New;" parent="XBCE_SCQUN8-LyyIOr6G-72" vertex="1">
          <mxGeometry y="90" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-78" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;dashPattern=1 2;endArrow=oval;endFill=1;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-48" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="520" y="530" as="targetPoint" />
            <Array as="points">
              <mxPoint x="510" y="240" />
              <mxPoint x="540" y="240" />
              <mxPoint x="540" y="530" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;dashPattern=1 2;endArrow=oval;endFill=1;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="560" y="165" />
              <mxPoint x="560" y="550" />
            </Array>
            <mxPoint x="520" y="550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-80" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;exec_control/dispatcher.py&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="40" width="240" height="460" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-86" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="XBCE_SCQUN8-LyyIOr6G-80" source="XBCE_SCQUN8-LyyIOr6G-81" target="XBCE_SCQUN8-LyyIOr6G-83" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-81" value="&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;entry_point(ext_args: ExtArgs)&lt;/font&gt;&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;br style=&quot;font-size: 9px;&quot;&gt;Accepts &lt;font face=&quot;Courier New&quot;&gt;ExtArgs&lt;/font&gt; object.&lt;br&gt;&lt;div&gt;Setup datamanager (once only).&lt;br style=&quot;font-size: 9px;&quot;&gt;Open db context.&lt;br style=&quot;font-size: 9px;&quot;&gt;Calls &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;do_dispatch()&lt;/font&gt;.&lt;br style=&quot;font-size: 9px;&quot;&gt;Close db context.&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;strokeWidth=2;" parent="XBCE_SCQUN8-LyyIOr6G-80" vertex="1">
          <mxGeometry x="10" y="30" width="220" height="90" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;dashPattern=1 1;" parent="XBCE_SCQUN8-LyyIOr6G-80" source="XBCE_SCQUN8-LyyIOr6G-83" target="XBCE_SCQUN8-LyyIOr6G-84" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-84" value="&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;do_dispatch_query()&lt;/font&gt;&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;br style=&quot;font-size: 9px;&quot;&gt;Uses passed &lt;font face=&quot;Courier New&quot;&gt;ExtArgs&lt;/font&gt; to instantiate correct query instruction object, pass InstructionInfo, pass &lt;font face=&quot;Courier New&quot;&gt;ExtArgsCommandStr&lt;/font&gt; and &lt;font face=&quot;Courier New&quot;&gt;ExtArgsQueryStr&lt;/font&gt;, and call &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;.perform()&lt;/font&gt;.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Most of the query instructions are launched via a look-up table. There is some additional standardised logic here for query output in various formats.&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;strokeWidth=2;" parent="XBCE_SCQUN8-LyyIOr6G-80" vertex="1">
          <mxGeometry x="10" y="280" width="220" height="170" as="geometry" />
        </mxCell>
        <mxCell id="g9VZTQ1v9xe11HABDd8E-2" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;dashPattern=8 8;" parent="XBCE_SCQUN8-LyyIOr6G-80" source="XBCE_SCQUN8-LyyIOr6G-84" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="190" y="310" as="sourcePoint" />
            <mxPoint x="380" y="365" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-83" value="&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;do_dispatch()&lt;/font&gt;&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;br style=&quot;font-size: 9px;&quot;&gt;Uses passed &lt;font face=&quot;Courier New&quot;&gt;ExtArgs&lt;/font&gt; to instantiate correct instruction object, pass &lt;font face=&quot;Courier New&quot;&gt;InstructionInfo&lt;/font&gt; object, pass &lt;font face=&quot;Courier New&quot;&gt;ExtArgsCommandStr&lt;/font&gt;, and call &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;.perform()&lt;/font&gt;.&lt;br style=&quot;font-size: 9px;&quot;&gt;Queries handled similar way but with &lt;font face=&quot;Courier New&quot; style=&quot;font-size: 9px;&quot;&gt;do_dispatch_query()&lt;/font&gt;." style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;strokeWidth=2;" parent="XBCE_SCQUN8-LyyIOr6G-80" vertex="1">
          <mxGeometry x="10" y="140" width="220" height="110" as="geometry" />
        </mxCell>
        <mxCell id="g9VZTQ1v9xe11HABDd8E-1" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;dashPattern=8 8;" parent="XBCE_SCQUN8-LyyIOr6G-80" source="XBCE_SCQUN8-LyyIOr6G-83" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="110" y="360" as="sourcePoint" />
            <mxPoint x="380" y="195" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-88" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-40" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="650" y="90" as="targetPoint" />
            <Array as="points">
              <mxPoint x="310" y="160" />
              <mxPoint x="310" y="90" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="XBCE_SCQUN8-LyyIOr6G-57" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="580" y="360" />
              <mxPoint x="580" y="130" />
              <mxPoint x="650" y="130" />
            </Array>
            <mxPoint x="650" y="130" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XBCE_SCQUN8-LyyIOr6G-93" value="&lt;i style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot; face=&quot;Courier New&quot;&gt;ExtArgs&lt;/font&gt; contains &lt;font style=&quot;font-size: 10px;&quot; face=&quot;Courier New&quot;&gt;ExtArgsQueryStr&lt;/font&gt; and &lt;font style=&quot;font-size: 10px;&quot; face=&quot;Courier New&quot;&gt;ExtArgsCommandStr&lt;/font&gt;&lt;/i&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="340" y="600" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FVkTSmzb7Pdf4erNcc2C-1" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;instructions/*.py&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="960" y="40" width="160" height="460" as="geometry" />
        </mxCell>
        <mxCell id="FVkTSmzb7Pdf4erNcc2C-2" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;Instructions handle actual execution paths.&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;See &quot;Instructions, specifications, and tasks&quot; page.&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="FVkTSmzb7Pdf4erNcc2C-1" vertex="1">
          <mxGeometry x="10" y="30" width="140" height="110" as="geometry" />
        </mxCell>
        <mxCell id="vtV3xL8Ig5xgcc_I5dex-1" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;exec_control/misc.py&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="560" width="240" height="200" as="geometry" />
        </mxCell>
        <mxCell id="HqDnvO9qlWCIG9uqmQp--1" value="Misc:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;i. Logging setup:&amp;nbsp;&lt;font face=&quot;Courier New&quot;&gt;setup_logging()&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;ii.&amp;nbsp;&lt;font face=&quot;Courier New&quot;&gt;setup_meta_db()&lt;/font&gt; setup for singleton instance of&amp;nbsp;&lt;font face=&quot;Courier New&quot;&gt;g_meta_sqlite_context&lt;/font&gt;. &lt;font face=&quot;Courier New&quot;&gt;check_meta_db_tables_setup()&lt;/font&gt;&amp;nbsp;to determine if tables are setup. Also &lt;font face=&quot;Courier New&quot;&gt;close_meta_db()&lt;/font&gt; to close an open db.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;iii.&amp;nbsp;&lt;font face=&quot;Courier New&quot;&gt;check_active_run_with_conda()&lt;/font&gt; that does conda environment stuff.&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="vtV3xL8Ig5xgcc_I5dex-1" vertex="1">
          <mxGeometry x="10" y="30" width="220" height="160" as="geometry" />
        </mxCell>
        <mxCell id="HqDnvO9qlWCIG9uqmQp--2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" target="vtV3xL8Ig5xgcc_I5dex-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="870" y="110" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="920" y="110" />
              <mxPoint x="920" y="610" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="HqDnvO9qlWCIG9uqmQp--3" value="Calls &lt;font face=&quot;Courier New&quot;&gt;setup_meta_db()&lt;/font&gt; and&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;check_meta_db_tables_setup()&amp;nbsp;&lt;/font&gt;then&lt;/div&gt;&lt;div&gt;finally&amp;nbsp;&lt;span style=&quot;font-family: &amp;quot;Courier New&amp;quot;;&quot;&gt;close_meta_db()&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=0;points=[];fontSize=10;" parent="HqDnvO9qlWCIG9uqmQp--2" vertex="1" connectable="0">
          <mxGeometry x="0.8661" y="-2" relative="1" as="geometry">
            <mxPoint x="-30" y="22" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bdgGGyO7C9tceOIkd3II-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=classic;startFill=1;endArrow=none;endFill=0;" edge="1" parent="1" source="XBCE_SCQUN8-LyyIOr6G-40" target="XBCE_SCQUN8-LyyIOr6G-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bdgGGyO7C9tceOIkd3II-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;endArrow=classic;endFill=1;startArrow=classic;startFill=1;" edge="1" parent="1" source="XBCE_SCQUN8-LyyIOr6G-40">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="430" y="190" as="targetPoint" />
            <Array as="points">
              <mxPoint x="230" y="200" />
              <mxPoint x="430" y="200" />
              <mxPoint x="430" y="190" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="bdgGGyO7C9tceOIkd3II-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=-0.001;entryY=0.332;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="XBCE_SCQUN8-LyyIOr6G-47" target="XBCE_SCQUN8-LyyIOr6G-81">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="320" y="240" />
              <mxPoint x="320" y="100" />
              <mxPoint x="646" y="100" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="-Km-5AFT57jzfrzhdrQC" name="Instructions, specifications, and tasks.">
    <mxGraphModel dx="1728" dy="943" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="7GqqldB8GadaWRTE--1i-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shape=flexArrow;entryX=0.01;entryY=0.204;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="7GqqldB8GadaWRTE--1i-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="80" y="180" as="sourcePoint" />
            <mxPoint x="160" y="350" as="targetPoint" />
            <Array as="points">
              <mxPoint x="80" y="340" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="7GqqldB8GadaWRTE--1i-1" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;instructions/base.py: BaseInstruction&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="80" width="320" height="100" as="geometry" />
        </mxCell>
        <mxCell id="7GqqldB8GadaWRTE--1i-17" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;Base class that is mostly a template but does some very basic setup.&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;All derived classes must at a minimum implement &lt;font face=&quot;Courier New&quot;&gt;.perform()&lt;/font&gt; to do what the instruction should do.&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="7GqqldB8GadaWRTE--1i-1" vertex="1">
          <mxGeometry x="10" y="30" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shape=flexArrow;" parent="1" source="7GqqldB8GadaWRTE--1i-2" target="qU3h8FKMG3DbV0WdV8Ky-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7GqqldB8GadaWRTE--1i-2" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;instructions/base.py: BaseFilesInstruction&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="160" y="200" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-1" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;Base class from which almost all file processing instructions should be derived. Sets up transaction stuff. Accepts list of input and output target files.&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="7GqqldB8GadaWRTE--1i-2" vertex="1">
          <mxGeometry x="10" y="20" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="7GqqldB8GadaWRTE--1i-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shape=flexArrow;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="160" y="570" as="targetPoint" />
            <mxPoint x="160" y="370" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="100" y="370" />
              <mxPoint x="100" y="570" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="7GqqldB8GadaWRTE--1i-3" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;instructions/base.py: BaseQuery&lt;/font&gt;&lt;span style=&quot;font-size: 9px; background-color: initial;&quot;&gt;Instruction&lt;/span&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="160" y="320" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-4" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;Base class from which almost all query instructions are derived. Typically not implemented directly, i.e. derived from and implement BaseSpecsQueryInstruction or BaseMetaQueryInstruction instead.&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="7GqqldB8GadaWRTE--1i-3" vertex="1">
          <mxGeometry x="10" y="20" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;shape=flexArrow;" parent="1" source="7GqqldB8GadaWRTE--1i-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="410" y="490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7GqqldB8GadaWRTE--1i-4" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;instructions/base.py: BaseSpecsQuery&lt;/font&gt;&lt;span style=&quot;font-size: 9px; background-color: initial;&quot;&gt;Instruction&lt;/span&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="160" y="440" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-5" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;Class from which &quot;specs&quot; query instructions are derived, e.g. queries that ask for a list of datamanager&#39;s commands.&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="7GqqldB8GadaWRTE--1i-4" vertex="1">
          <mxGeometry x="10" y="20" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;shape=flexArrow;" parent="1" source="7GqqldB8GadaWRTE--1i-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="410" y="610" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7GqqldB8GadaWRTE--1i-5" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;instructions/base.py: BaseSpecsQuery&lt;/font&gt;&lt;span style=&quot;font-size: 9px; background-color: initial;&quot;&gt;Instruction&lt;/span&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="160" y="560" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-6" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;Class from which &quot;meta&quot; query instructions are derived, i.e. any query that uses &lt;font face=&quot;Courier New&quot;&gt;meta/*.py&lt;/font&gt; to query the internal sqlite db .&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="7GqqldB8GadaWRTE--1i-5" vertex="1">
          <mxGeometry x="10" y="20" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="7GqqldB8GadaWRTE--1i-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=-0.004;entryY=0.179;entryDx=0;entryDy=0;entryPerimeter=0;shape=flexArrow;" parent="1" source="7GqqldB8GadaWRTE--1i-1" target="7GqqldB8GadaWRTE--1i-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7GqqldB8GadaWRTE--1i-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shape=flexArrow;entryX=-0.01;entryY=0.134;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="7GqqldB8GadaWRTE--1i-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="160" y="390" as="sourcePoint" />
            <mxPoint x="150" y="456" as="targetPoint" />
            <Array as="points">
              <mxPoint x="130" y="390" />
              <mxPoint x="130" y="453" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" parent="1" source="qU3h8FKMG3DbV0WdV8Ky-7" target="qU3h8FKMG3DbV0WdV8Ky-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-7" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;specifications/*.py&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="40" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-17" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;Given a list of filenames, specifications instantiates the appropriate corresponding resource definition objects based on specifications kept in YAML files.&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;Then caller calls&amp;nbsp;&lt;font face=&quot;Courier New&quot;&gt;create_task_from_filenames()&lt;/font&gt; to get a list of tasks that are setup and ready to go.&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="qU3h8FKMG3DbV0WdV8Ky-7" vertex="1">
          <mxGeometry x="10" y="30" width="180" height="100" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;endArrow=none;endFill=0;startArrow=classic;startFill=1;" parent="1" source="qU3h8FKMG3DbV0WdV8Ky-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="40" y="760" as="targetPoint" />
            <Array as="points">
              <mxPoint x="460" y="760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-10" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;instructions/query.py : *&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="410" y="440" width="200" height="220" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-11" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;Actually implements concrete classes for queries.&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="qU3h8FKMG3DbV0WdV8Ky-10" vertex="1">
          <mxGeometry x="10" y="20" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=classic;startFill=1;" parent="1" source="qU3h8FKMG3DbV0WdV8Ky-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="640" y="120" as="targetPoint" />
            <Array as="points">
              <mxPoint x="440" y="120" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-26" value="&lt;div&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;&lt;b&gt;Optional:&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;From list of filenames, &lt;font face=&quot;Courier New&quot;&gt;TaskInfo&lt;/font&gt; object,&amp;nbsp;&lt;/font&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;and transaction,&lt;/font&gt;&lt;div&gt;&lt;span style=&quot;font-size: 9px;&quot;&gt;gets a task that is &quot;pre-loaded&quot;&lt;/span&gt;&lt;span style=&quot;font-size: 9px;&quot;&gt;&amp;nbsp;with the relevant&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 9px;&quot;&gt;resources (instantiated resource definitions).&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="qU3h8FKMG3DbV0WdV8Ky-23" vertex="1" connectable="0">
          <mxGeometry x="0.6318" y="4" relative="1" as="geometry">
            <mxPoint x="-68" y="-26" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" parent="1" source="qU3h8FKMG3DbV0WdV8Ky-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="40" y="40" as="targetPoint" />
            <Array as="points">
              <mxPoint x="380" y="225" />
              <mxPoint x="380" y="40" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-43" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;Called from &lt;font style=&quot;font-size: 10px;&quot; face=&quot;Courier New&quot;&gt;do_dispatch()&lt;/font&gt;&lt;/font&gt;" style="edgeLabel;html=1;align=left;verticalAlign=middle;resizable=0;points=[];" parent="qU3h8FKMG3DbV0WdV8Ky-42" vertex="1" connectable="0">
          <mxGeometry x="0.8877" y="-1" relative="1" as="geometry">
            <mxPoint x="-31" y="-9" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-12" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;instructions/*.py : *&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="410" y="200" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-13" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;Actually implements concrete classes for files instructions.&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="qU3h8FKMG3DbV0WdV8Ky-12" vertex="1">
          <mxGeometry x="10" y="20" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-14" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;resource_definitions/*.py&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="880" y="40" width="240" height="140" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-16" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;Implements definitions (Pydantic classes) for various resources. These are only the definitions, not instantiated objects.&lt;/font&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The actual data is handled by specifications. However, these resource definitions wil be encoded in a YAML file, so any esoteric fields must have a serialization/deserialization defined.&lt;br&gt;&lt;div&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="qU3h8FKMG3DbV0WdV8Ky-14" vertex="1">
          <mxGeometry x="10" y="40" width="220" height="100" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-27" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;tasks/*.py&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="880" y="200" width="240" height="200" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-41" value="Specialised classes that &quot;do something&quot; when &lt;font face=&quot;Courier New&quot;&gt;.perform()&lt;/font&gt; is called..&lt;div&gt;&lt;br&gt;&lt;div&gt;Often, this will be iterating through a list of resource definitions that were added by specifications when the task was created.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Other times, the task was created directly by the instruction and we may iterate through another list, e.g. for archiver.&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="qU3h8FKMG3DbV0WdV8Ky-27" vertex="1">
          <mxGeometry x="10" y="30" width="220" height="160" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;shape=flexArrow;" parent="1" source="qU3h8FKMG3DbV0WdV8Ky-30" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="880" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-30" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;tasks/base.py : BaseTask&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="300" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-31" value="Base class for tasks. Formalises arguments/layout and some basic generic functionality." style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="qU3h8FKMG3DbV0WdV8Ky-30" vertex="1">
          <mxGeometry x="10" y="20" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="qU3h8FKMG3DbV0WdV8Ky-45" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;Called from &lt;font face=&quot;Courier New&quot;&gt;do_query_dispatch()&lt;/font&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="40" y="730" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ofwN_uoOxVoxGkwkxdRN-1" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="860" y="600" as="sourcePoint" />
            <mxPoint x="960" y="600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ofwN_uoOxVoxGkwkxdRN-2" value="Double arrow indicates inheritance" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="860" y="620" width="140" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="YqLSNum573wMznCU2Q4p" name="Meta">
    <mxGraphModel dx="1430" dy="781" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" parent="1" source="FTSaDaE9Lzy7Y0ZxxwKm-1" target="MAoHbvNmkCc9JuIqW9R0-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FTSaDaE9Lzy7Y0ZxxwKm-1" value="meta/base.py" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="280" y="80" width="240" height="320" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-1" value="&lt;font style=&quot;font-size: 11px;&quot;&gt;Base class from which all concrete &quot;meta&quot; (db) classes are derived.&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 11px;&quot;&gt;Unlike most other base classes, this includes significant functionality.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;b&gt;ALL&lt;/b&gt; db queries in descendent classes should call either&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;_simple_select_query() &lt;/font&gt;or&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;_perform_dml_query()&lt;/font&gt;&amp;nbsp;to perform a query, and also make use of the transaction control herein. &lt;b&gt;This is important!&lt;/b&gt; This is how we control transactions, etc.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;All derived classes must implement their own &lt;font face=&quot;Courier New&quot;&gt;setup_tables()&lt;/font&gt; to create the coresponding tables.&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="FTSaDaE9Lzy7Y0ZxxwKm-1" vertex="1">
          <mxGeometry x="10" y="30" width="220" height="280" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-2" value="meta/fileregistry_info.py" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="720" y="280" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-3" value="&lt;span style=&quot;font-size: 11px;&quot;&gt;Handles db records related to the file registry.&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="MAoHbvNmkCc9JuIqW9R0-2" vertex="1">
          <mxGeometry x="10" y="30" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-5" value="meta/archive.py" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="720" y="160" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-6" value="&lt;span style=&quot;font-size: 11px;&quot;&gt;Handles db records related to the archive.&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="MAoHbvNmkCc9JuIqW9R0-5" vertex="1">
          <mxGeometry x="10" y="30" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-8" value="meta/runinfo.py" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="720" y="400" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-9" value="&lt;span style=&quot;font-size: 11px;&quot;&gt;Handles db records related to runids and conda environment info.&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="MAoHbvNmkCc9JuIqW9R0-8" vertex="1">
          <mxGeometry x="10" y="30" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-11" value="meta/transactions.py" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="720" y="520" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-12" value="&lt;span style=&quot;font-size: 11px;&quot;&gt;Handles db records related to transactions.&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="MAoHbvNmkCc9JuIqW9R0-11" vertex="1">
          <mxGeometry x="10" y="30" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="MAoHbvNmkCc9JuIqW9R0-13" target="MAoHbvNmkCc9JuIqW9R0-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="MAoHbvNmkCc9JuIqW9R0-13" target="MAoHbvNmkCc9JuIqW9R0-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="MAoHbvNmkCc9JuIqW9R0-13" target="MAoHbvNmkCc9JuIqW9R0-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="MAoHbvNmkCc9JuIqW9R0-13" target="MAoHbvNmkCc9JuIqW9R0-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xbHXn6_b8ZQ-PyzIkOp8-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" edge="1" parent="1" source="MAoHbvNmkCc9JuIqW9R0-13">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="40" y="719.689655172414" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-13" value="meta/setup_meta_db.py" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="280" y="640" width="240" height="160" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-14" value="&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;SetupMetaDb&lt;/font&gt; class creates tables for the one-time database setup.&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;In particular, it calls &lt;font face=&quot;Courier New&quot;&gt;setup_tables() &lt;/font&gt;on &lt;font face=&quot;Courier New&quot;&gt;ArchiveMeta&lt;/font&gt;, &lt;font face=&quot;Courier New&quot;&gt;FileRegistryInfoMeta&lt;/font&gt;, &lt;font face=&quot;Courier New&quot;&gt;RuninfoMeta&lt;/font&gt;, and &lt;font face=&quot;Courier New&quot;&gt;TransactionsMeta&lt;/font&gt; objects.&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="MAoHbvNmkCc9JuIqW9R0-13" vertex="1">
          <mxGeometry x="10" y="30" width="220" height="120" as="geometry" />
        </mxCell>
        <mxCell id="xbHXn6_b8ZQ-PyzIkOp8-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" edge="1" parent="1" source="MAoHbvNmkCc9JuIqW9R0-15">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="40" y="519.6896551724137" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-15" value="meta/sqlite_context.py" style="swimlane;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="280" y="430" width="240" height="180" as="geometry" />
        </mxCell>
        <mxCell id="MAoHbvNmkCc9JuIqW9R0-16" value="&lt;span style=&quot;font-size: 11px;&quot;&gt;Context for handling the connection to sqlite.&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;Implemented in&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;_MetaSqliteContext&lt;/font&gt; and instantiated in module as &lt;b&gt;singleton&lt;/b&gt; global&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;g_meta_sqlite_context&lt;/font&gt;.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;Imported and used by &lt;font face=&quot;Courier New&quot;&gt;BaseMeta&lt;/font&gt;.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;Db setup and close called from &lt;font face=&quot;Courier New&quot;&gt;dispatch.py&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" parent="MAoHbvNmkCc9JuIqW9R0-15" vertex="1">
          <mxGeometry x="10" y="30" width="220" height="140" as="geometry" />
        </mxCell>
        <mxCell id="xbHXn6_b8ZQ-PyzIkOp8-2" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;Calls from &lt;font face=&quot;Courier New&quot;&gt;dispatch.py&lt;/font&gt; to setup&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;or close db connection&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="25" y="485" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xbHXn6_b8ZQ-PyzIkOp8-4" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;dispatch.py&lt;/font&gt; calls&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;check_meta_db_tables_setup()&lt;/font&gt; in &lt;font face=&quot;Courier New&quot;&gt;misc.py&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10px;&quot;&gt;which then calls &lt;font face=&quot;Courier New&quot;&gt;SetupMetaDb.&lt;/font&gt;&lt;font face=&quot;Courier New&quot;&gt;do_setup()&lt;/font&gt;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="20" y="663" width="250" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="RCnd7UhvEVaCnwgzhKon" name="Archiver and file registry">
    <mxGraphModel dx="1728" dy="943" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="qzbpFymddAXdpN5-U6gl-1" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;archive/archiver.py: FileToArchive&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="80" width="240" height="120" as="geometry" />
        </mxCell>
        <mxCell id="endV0GAJbXYBOKsevJ12-1" value="&lt;span style=&quot;font-size: 11px;&quot;&gt;Pydantic model. Holds data that specifies one file to put to the archive.&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;Gets passed to &lt;font face=&quot;Courier New&quot;&gt;archive.&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;font face=&quot;Yk55SiedR5uYBoC3a3kC&quot;&gt;archive_put()&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="qzbpFymddAXdpN5-U6gl-1">
          <mxGeometry x="10" y="30" width="220" height="90" as="geometry" />
        </mxCell>
        <mxCell id="endV0GAJbXYBOKsevJ12-2" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;archive/archiver.py: FileFromArchive&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="240" width="240" height="120" as="geometry" />
        </mxCell>
        <mxCell id="endV0GAJbXYBOKsevJ12-3" value="&lt;span style=&quot;font-size: 11px;&quot;&gt;Pydantic model. Holds data that specifies one file to pull from the archive.&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;Gets passed to &lt;font face=&quot;Courier New&quot;&gt;archive.&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;font face=&quot;Yk55SiedR5uYBoC3a3kC&quot;&gt;archive_pull()&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="endV0GAJbXYBOKsevJ12-2">
          <mxGeometry x="10" y="40" width="220" height="80" as="geometry" />
        </mxCell>
        <mxCell id="endV0GAJbXYBOKsevJ12-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" edge="1" parent="1" source="endV0GAJbXYBOKsevJ12-4">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="40" y="480" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="endV0GAJbXYBOKsevJ12-4" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;archive/archiver.py: _Archiver&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="400" width="240" height="320" as="geometry" />
        </mxCell>
        <mxCell id="endV0GAJbXYBOKsevJ12-5" value="&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;Instantiated as module global &lt;b&gt;singleton &lt;/b&gt;object.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;Handles put and pull operations to the archive based on &lt;font face=&quot;Courier New&quot;&gt;FileToArchive&lt;/font&gt; and &lt;font face=&quot;Courier New&quot;&gt;FileFromArchive&lt;/font&gt; lists.&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;Use&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;archive_put()&lt;/font&gt; and &lt;font face=&quot;Courier New&quot;&gt;archive_pull()&lt;/font&gt;, respectively.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;Typically, you&#39;d want to use the relevant instructions and tasks instead of calling directly: there is usually other stuff going on you need to account for, which that code handles.&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="endV0GAJbXYBOKsevJ12-4">
          <mxGeometry x="10" y="40" width="220" height="270" as="geometry" />
        </mxCell>
        <mxCell id="endV0GAJbXYBOKsevJ12-12" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;Calls from&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;PullActiveFilesFromArchiveTask&lt;/font&gt;,&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;font-size: 10px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;PutFilesToArchiveTask&lt;/font&gt;,&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;ArchiveHttpFilesTask&lt;/font&gt;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="10" y="414" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="endV0GAJbXYBOKsevJ12-14" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;file_control/fileregistry_info_ctrl.py :&amp;nbsp;FileregistryInfoCtrl&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="400" width="280" height="320" as="geometry" />
        </mxCell>
        <mxCell id="endV0GAJbXYBOKsevJ12-15" value="&lt;span style=&quot;font-size: 11px;&quot;&gt;Class used to interact with the file regsitry. Offers a variety of methods.&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="endV0GAJbXYBOKsevJ12-14">
          <mxGeometry x="10" y="40" width="260" height="270" as="geometry" />
        </mxCell>
        <mxCell id="endV0GAJbXYBOKsevJ12-16" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;file_control/fileregistry_misc_utils.py&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="240" width="280" height="120" as="geometry" />
        </mxCell>
        <mxCell id="endV0GAJbXYBOKsevJ12-17" value="&lt;span style=&quot;font-size: 11px;&quot;&gt;One function,&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;do_force_clean_activeset_fileregistry()&lt;/font&gt; which does what it says on the tin.&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="endV0GAJbXYBOKsevJ12-16">
          <mxGeometry x="10" y="30" width="260" height="90" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
